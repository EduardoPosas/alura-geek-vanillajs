(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(n){if(n.ep)return;n.ep=!0;const c=r(n);fetch(n.href,c)}})();const L=async()=>{const t="https://alura-geek-api-e8fc.onrender.com/categories";try{const e=await fetch(t),r=await e.json();if(!e.ok)throw new Error("Fallo al realizar la petición a categorias");return r}catch(e){console.log(e)}},S=async()=>{const t="https://alura-geek-api-e8fc.onrender.com/products";try{return await(await fetch(t)).json()}catch(e){console.log(e)}},q=async t=>{const e=`https://alura-geek-api-e8fc.onrender.com/products?category=${t}&_limit=6`;try{const r=await fetch(e);if(!r.ok)throw new Error("Petición falló");return await r.json()}catch(r){console.log(r)}},P=()=>{const t=document.createElement("a");return t.className="py-3 px-4 border border-indigo-600 text-indigo-600 font-bold rounded-sm hover:bg-indigo-800 hover:text-neutral-100",t.href="/views/login.html",t.textContent="Login",t},B=()=>{const t=document.createElement("a");return t.className="py-3 px-4 border border-red-600 text-red-600 font-bold rounded-sm hover:bg-red-800 hover:text-neutral-100",t.href="",t.textContent="Logout",t},O=()=>{const t=document.createElement("a");return t.className="py-3 px-4 border border-indigo-600 text-indigo-600 font-bold rounded-sm hover:bg-indigo-800 hover:text-neutral-100",t.href="/views/products.html",t.textContent="Admin",t},T=document.querySelector("[data-search-container]"),j=(t,e)=>{const r=t.target.value.toLowerCase(),o=document.querySelector(".filtered-products-container");if(o&&o.remove(),!r.length)return;const n=e.filter(a=>a.name.toLowerCase().includes(r)),c=document.createElement("ul");c.className="filtered-products-container absolute bg-white z-10 w-[40rem] mt-2 left-1/2 -translate-x-1/2 rounded-sm p-4 divide-y divide-indigo-200",n.forEach(a=>{const{id:d,name:l}=a,s=document.createElement("li");s.className="mt-2 py-2 px-4 hover:bg-indigo-100 cursor-pointer";const u=document.createElement("a");u.className="block w-full",u.textContent=l,u.href=`/views/product-description.html?id=${d}`,s.appendChild(u),c.appendChild(s)}),T.appendChild(c)},k=document.querySelector("[data-search]"),$=async()=>{(await L()).forEach(async e=>{const{id:r,category:o}=e,n=document.querySelector("[data-categories]"),c=document.createElement("section");c.className="mb-8 last-of-type:mb-0";const a=document.createElement("div");a.className="grid grid-cols-2 gap-4 md:grid-cols-4 lg:grid-cols-6";const d=document.createElement("div");d.className="flex items-center justify-between mb-8 border-b-[1px] border-b-neutral-200";const l=document.createElement("h2");l.className="text-3xl font-bold text-neutral-700",l.textContent=o;const s=document.createElement("a");s.className="text-lg text-indigo-600 flex items-center after:content-[url('/images/right-arrow.svg')] after:ml-2 after:transition-transform after:ease-in-out after:duration-300 hover:after:translate-x-1",s.textContent="Ver Todo",s.href=`../views/products-category.html?category=${o}`,d.appendChild(l),d.appendChild(s),c.appendChild(d),(await q(o)).forEach(x=>{const{category:D,description:v,id:C,imageUrl:E,name:w,price:N}=x,m=document.createElement("div"),p=document.createElement("img");p.className="h-[15rem] w-full object-cover object-top",p.src=E,p.alt=v;const y=document.createElement("h3");y.className="text-base mt-4",y.textContent=w;const b=document.createElement("p");b.className="font-bold text-neutral-700 text-xl mt-4",b.textContent=`$ ${N}`;const f=document.createElement("a");f.className="text-indigo-600 inline-block mt-4 transition-all duration-300 ease-in-out hover:text-indigo-800 hover:font-bold",f.textContent="Ver Producto",f.href=`/views/product-description.html?id=${C}`,m.appendChild(p),m.appendChild(y),m.appendChild(b),m.appendChild(f),a.appendChild(m),c.appendChild(a)}),n.appendChild(c)})};document.addEventListener("DOMContentLoaded",async()=>{const t=JSON.parse(sessionStorage.getItem("user")),e=document.querySelector("[data-header]");if(!t){const o=P();e.appendChild(o)}if(t){const o=document.createElement("div");o.className="flex gap-2";const n=B(),c=O();n.onclick=()=>{sessionStorage.removeItem("user"),window.location.reload()},o.appendChild(c),o.appendChild(n),e.appendChild(o)}const r=await S();k.addEventListener("keyup",o=>j(o,r))});$();const g=(t="error",e)=>{const r=document.querySelector(".alert");r&&r.remove();const o=document.createElement("p");return t==="error"?o.className="alert py-3 px-4 text-neutral-100 font-bold rounded-sm bg-red-600 mt-4 text-center":o.className="bg-green-500 py-3 px-4 text-neutral-100 text-sm font-bold rounded-sm text-center",o.innerText=e,o},i=document.querySelector("[data-contact]"),h=document.querySelector("[data-contact-container]"),A=t=>{t.preventDefault();let e;const r={name:i.querySelector("#name").value,message:i.querySelector("#message").value};if(Object.values(r).includes("")){e=g("error","Todos los campos son obligatorios"),h.insertBefore(e,i),setTimeout(()=>{e.remove()},3e3);return}if(r.name.length>40){e=g("error","El nombre debe contener menos de 40 caracteres"),h.insertBefore(e,i),setTimeout(()=>{e.remove()},3e3);return}if(r.message.length>120){e=g("error","El nombre debe contener menos de 120 caracteres"),h.insertBefore(e,i),setTimeout(()=>{e.remove()},3e3);return}e=g("success","Datos enviados con éxito"),h.insertBefore(e,i),setTimeout(()=>{e.remove(),i.reset()},3e3)};i.addEventListener("submit",A);
